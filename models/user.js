"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.User = void 0;
const mongoose_1 = require("mongoose");
const UserSchema = new mongoose_1.Schema({
    username: {
        type: String,
        unique: true,
        required: true,
        trim: true,
    },
    email: {
        type: String,
        unique: true,
        match: [/.+@.+\..+/, `Please enter a valid email`],
    },
    thoughts: [
        {
            type: mongoose_1.Schema.Types.ObjectId,
            ref: "Thoughts",
        },
    ],
    friends: {
        type: [String],
    },
}, {
    id: false,
    toJSON: { virtuals: true },
});
UserSchema.virtual("thoughtCount").get(function () {
    return this.thoughts.length;
});
UserSchema.virtual("friendCount").get(function () {
    return this.friends.length;
});
exports.User = (0, mongoose_1.model)("User", UserSchema);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tb2RlbHMvdXNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx1Q0FBeUM7QUFFekMsTUFBTSxVQUFVLEdBQUcsSUFBSSxpQkFBTSxDQUMzQjtJQUNFLFFBQVEsRUFBRTtRQUNSLElBQUksRUFBRSxNQUFNO1FBQ1osTUFBTSxFQUFFLElBQUk7UUFDWixRQUFRLEVBQUUsSUFBSTtRQUNkLElBQUksRUFBRSxJQUFJO0tBQ1g7SUFDRCxLQUFLLEVBQUU7UUFDTCxJQUFJLEVBQUUsTUFBTTtRQUNaLE1BQU0sRUFBRSxJQUFJO1FBQ1osS0FBSyxFQUFFLENBQUMsV0FBVyxFQUFFLDRCQUE0QixDQUFDO0tBQ25EO0lBQ0QsUUFBUSxFQUFFO1FBQ1I7WUFDRSxJQUFJLEVBQUUsaUJBQU0sQ0FBQyxLQUFLLENBQUMsUUFBUTtZQUMzQixHQUFHLEVBQUUsVUFBVTtTQUNoQjtLQUNGO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDO0tBQ2Y7Q0FDRixFQUNEO0lBQ0UsRUFBRSxFQUFFLEtBQUs7SUFDVCxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO0NBQzNCLENBQ0YsQ0FBQztBQUVGLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQ3JDLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7QUFDOUIsQ0FBQyxDQUFDLENBQUM7QUFFSCxVQUFVLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUNwQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzdCLENBQUMsQ0FBQyxDQUFDO0FBRVUsUUFBQSxJQUFJLEdBQUcsSUFBQSxnQkFBSyxFQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1vZGVsLCBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKFxyXG4gIHtcclxuICAgIHVzZXJuYW1lOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgdW5pcXVlOiB0cnVlLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgdHJpbTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBlbWFpbDoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHVuaXF1ZTogdHJ1ZSxcclxuICAgICAgbWF0Y2g6IFsvLitALitcXC4uKy8sIGBQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbGBdLFxyXG4gICAgfSxcclxuICAgIHRob3VnaHRzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgcmVmOiBcIlRob3VnaHRzXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gICAgZnJpZW5kczoge1xyXG4gICAgICB0eXBlOiBbU3RyaW5nXSxcclxuICAgIH0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogZmFsc2UsXHJcbiAgICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcclxuICB9XHJcbik7XHJcblxyXG5Vc2VyU2NoZW1hLnZpcnR1YWwoXCJ0aG91Z2h0Q291bnRcIikuZ2V0KGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy50aG91Z2h0cy5sZW5ndGg7XHJcbn0pO1xyXG5cclxuVXNlclNjaGVtYS52aXJ0dWFsKFwiZnJpZW5kQ291bnRcIikuZ2V0KGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5mcmllbmRzLmxlbmd0aDtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgVXNlciA9IG1vZGVsKFwiVXNlclwiLCBVc2VyU2NoZW1hKTtcclxuIl19